import{r as n,o as s,c as a,a as t,w as e,d as o,b as p}from"./app.3648918a.js";const c='{"title":"Routing","description":"","frontmatter":{},"headers":[{"level":2,"title":"Basic Routing","slug":"basic-routing"},{"level":2,"title":"The Default Route Files","slug":"the-default-route-files"},{"level":2,"title":"Available Router Methods","slug":"available-router-methods"},{"level":2,"title":"Route Groups","slug":"route-groups"},{"level":3,"title":"Middleware","slug":"middleware"},{"level":3,"title":"Route Prefixes","slug":"route-prefixes"}],"relativePath":"docs/advanced/routing.md","lastUpdated":1614035377892}',u={},i=o('<h1 id="routing"><a class="header-anchor" href="#routing" aria-hidden="true">#</a> Routing</h1><p><div class="table-of-contents"><ul><li><a href="#basic-routing">Basic Routing</a></li><li><a href="#the-default-route-files">The Default Route Files</a></li><li><a href="#available-router-methods">Available Router Methods</a></li><li><a href="#route-groups">Route Groups</a><ul><li><a href="#middleware">Middleware</a></li><li><a href="#route-prefixes">Route Prefixes</a></li></ul></li></ul></div></p><h2 id="basic-routing"><a class="header-anchor" href="#basic-routing" aria-hidden="true">#</a> Basic Routing</h2><p>The Router is a powerful wrapper around the WordPress <code>register_rest_route</code> function enabling you to use groups, middleware, and controllers.</p><p>The most basic route accepts a URI and a closure, providing a very simple and expressive method of defining routes and behavior without complicated routing configuration files:</p><div class="language-php"><pre><code><span class="token keyword">use</span> <span class="token package">Radiate<span class="token punctuation">\\</span>Support<span class="token punctuation">\\</span>Facades<span class="token punctuation">\\</span>Route</span><span class="token punctuation">;</span>\n\n<span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;/greeting&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token string single-quoted-string">&#39;Hello World&#39;</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// https://example.com/wp-json/api/greeting</span>\n</code></pre></div><p>There is also a special <code>ajax</code> method that registers an AJAX route with the same fluent API. The AJAX action is passed instead of a URI.</p><div class="language-php"><pre><code><span class="token keyword">use</span> <span class="token package">Radiate<span class="token punctuation">\\</span>Support<span class="token punctuation">\\</span>Facades<span class="token punctuation">\\</span>Route</span><span class="token punctuation">;</span>\n\n<span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;greeting&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token string single-quoted-string">&#39;Hello World&#39;</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// https://example.com/wp-admin/admin-ajax.php?action=greeting</span>\n</code></pre></div><h2 id="the-default-route-files"><a class="header-anchor" href="#the-default-route-files" aria-hidden="true">#</a> The Default Route Files</h2><p>All routes are defined in your route files, which are located in the routes directory. These files are automatically loaded by your application&#39;s <code>App\\Providers\\RouteServiceProvider</code>. The <code>routes/ajax.php</code> file defines AJAX routes. These routes are assigned the <code>ajax</code> middleware group, which provides features like CSRF protection. The routes in <code>routes/api.php </code>are stateless and are assigned the <code>api</code> middleware group.</p><div class="language-php"><pre><code><span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\\</span>Http<span class="token punctuation">\\</span>Controllers<span class="token punctuation">\\</span>UserController</span><span class="token punctuation">;</span>\n\n<span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;/user&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token class-name static-context">UserController</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;index&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// /wp-json/api/user</span>\n</code></pre></div><p>The WordPress REST API requires a namespace for each route. Routes defined in the <code>routes/api.php</code> file are nested within a route group by the <code>RouteServiceProvider</code>. Within this group, the <code>api</code> namespace is automatically applied so you do not need to manually apply it to every route in the file. You may modify the prefix and other route group options by modifying your <code>RouteServiceProvider</code> class.</p><h2 id="available-router-methods"><a class="header-anchor" href="#available-router-methods" aria-hidden="true">#</a> Available Router Methods</h2><p>The router allows you to register REST routes that respond to any HTTP verb:</p><div class="language-php"><pre><code><span class="token comment">// REST routes</span>\n<span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token variable">$uri</span><span class="token punctuation">,</span> <span class="token variable">$callback</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token variable">$uri</span><span class="token punctuation">,</span> <span class="token variable">$callback</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token variable">$uri</span><span class="token punctuation">,</span> <span class="token variable">$callback</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">patch</span><span class="token punctuation">(</span><span class="token variable">$uri</span><span class="token punctuation">,</span> <span class="token variable">$callback</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token variable">$uri</span><span class="token punctuation">,</span> <span class="token variable">$callback</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// AJAX routes</span>\n<span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token variable">$action</span><span class="token punctuation">,</span> <span class="token variable">$callback</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre></div><p>Sometimes you may need to register a route that responds to multiple HTTP verbs. You may do so using the <code>match</code> method. Or, you may even register a route that responds to all HTTP verbs using the any method:</p><div class="language-php"><pre><code><span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token keyword">match</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;get&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;post&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;/&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">//</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">any</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;/&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">//</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre></div><h2 id="route-groups"><a class="header-anchor" href="#route-groups" aria-hidden="true">#</a> Route Groups</h2><p>Route groups allow you to share attributes, such as middleware, across a large number of routes without needing to define those attributes on each individual route.</p><p>Nested groups merge attributes with their parent group. Middleware is merged while prefixes are appended. Namespace delimiters and slashes in URI prefixes are automatically added where appropriate.</p><h3 id="middleware"><a class="header-anchor" href="#middleware" aria-hidden="true">#</a> Middleware</h3><p>To assign middleware to all routes within a group, you may use the middleware method before defining the group. Middleware are executed in the order they are listed in the array:</p><div class="language-php"><pre><code><span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">middleware</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;first&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;second&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;/&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token comment">// Uses first &amp; second middleware...</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;/user/profile&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token comment">// Uses first &amp; second middleware...</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre></div><h3 id="route-prefixes"><a class="header-anchor" href="#route-prefixes" aria-hidden="true">#</a> Route Prefixes</h3><p>The prefix method may be used to prefix each route in the group with a given URI. For example, you may want to prefix all route URIs within the group with admin:</p><div class="language-php"><pre><code><span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">prefix</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;admin&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;/users&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token comment">// Matches The &quot;/admin/users&quot; URL</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre></div>',26),l=p("AJAX routes will ignore any prefixes given to the router group.");u.render=function(o,p,c,u,r,k){const d=n("AppNotice");return s(),a("div",null,[i,t(d,{type:"warning"},{default:e((()=>[l])),_:1})])};export default u;export{c as __pageData};
